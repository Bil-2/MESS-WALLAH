import{c as p,r as o,W as y,j as e,z as a}from"./index-2ba54131.js";import{C as j}from"./check-circle-29648753.js";import{A as S}from"./alert-circle-5a0acaf9.js";import{P as w}from"./phone-a0e8aeb2.js";import{S as N}from"./send-41e348a3.js";const k=p("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),O=()=>{const[n,g]=o.useState(""),[l,c]=o.useState(""),[d,i]=o.useState(!1),[t,h]=o.useState(null),[m,x]=o.useState(null),u=async()=>{try{const r=await(await fetch("/api/test-sms/twilio-status")).json();h(r.data)}catch(s){console.error("Failed to check Twilio status:",s),a.error("Failed to check SMS service status")}},b=async()=>{if(!n){a.error("Please enter a phone number");return}i(!0);try{const r=await(await fetch("/api/test-sms/send-test-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:n})})).json();r.success?(a.success("Test OTP sent successfully!"),x(r.data)):a.error(r.message||"Failed to send OTP")}catch(s){console.error("Failed to send OTP:",s),a.error("Failed to send test OTP")}finally{i(!1)}},f=async()=>{if(!n||!l){a.error("Please enter both phone number and message");return}i(!0);try{const r=await(await fetch("/api/test-sms/send-test-sms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:n,message:l})})).json();r.success?(a.success("Custom SMS sent successfully!"),x(r.data),c("")):a.error(r.message||"Failed to send SMS")}catch(s){console.error("Failed to send SMS:",s),a.error("Failed to send custom SMS")}finally{i(!1)}};return y.useEffect(()=>{u()},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900 pt-24 pb-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"SMS Service Test"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Test Twilio SMS integration for MESS WALLAH"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Twilio Status"}),e.jsx("button",{onClick:u,className:"text-orange-600 hover:text-orange-700 text-sm font-medium",children:"Refresh"})]}),t?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[t.configured?e.jsx(j,{className:"w-5 h-5 text-green-500 mr-2"}):e.jsx(S,{className:"w-5 h-5 text-yellow-500 mr-2"}),e.jsx("span",{className:`font-medium ${t.configured?"text-green-700":"text-yellow-700"}`,children:t.configured?"Configured":"Not Configured"})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 space-y-1",children:[e.jsxs("div",{children:["Account SID: ",e.jsx("span",{className:"font-mono",children:t.accountSid})]}),e.jsxs("div",{children:["Auth Token: ",e.jsx("span",{className:"font-mono",children:t.authToken})]}),e.jsxs("div",{children:["Phone Number: ",e.jsx("span",{className:"font-mono",children:t.phoneNumber})]})]}),e.jsx("div",{className:`p-3 rounded-lg text-sm ${t.configured?"bg-green-50 text-green-800 border border-green-200":"bg-yellow-50 text-yellow-800 border border-yellow-200"}`,children:t.message})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Loading status..."})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Test SMS"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",value:n,onChange:s=>g(s.target.value),placeholder:"+919876543210",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Include country code (e.g., +91 for India)"})]}),e.jsx("button",{onClick:b,disabled:d||!n,className:"w-full bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:d?"Sending...":"Send Test OTP"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custom Message (Optional)"}),e.jsx("textarea",{value:l,onChange:s=>c(s.target.value),placeholder:"Enter custom message to send...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs("button",{onClick:f,disabled:d||!n||!l,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),d?"Sending...":"Send Custom SMS"]})]})]})]}),m&&e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Last SMS Result"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:e.jsx("pre",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:JSON.stringify(m,null,2)})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"ðŸ“‹ Instructions"}),e.jsxs("div",{className:"text-blue-800 dark:text-blue-200 space-y-2 text-sm",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Phone Format:"})," Use international format with country code (e.g., +919876543210)"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Test OTP:"})," Sends a 6-digit verification code"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Custom SMS:"})," Send any message to test SMS delivery"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Simulation Mode:"})," If Twilio isn't configured, SMS will be simulated and logged"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Real SMS:"})," Configure Twilio credentials in .env to send actual SMS"]})]})]})]})})};export{O as default};
