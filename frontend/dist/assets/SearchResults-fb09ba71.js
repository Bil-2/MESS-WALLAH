import{c as y,r as c,j as e,Q as U,f as z,u as W,P as _}from"./index-2ba54131.js";import{H as D}from"./heart-dbfb26f6.js";import{M as F,S as G}from"./star-6a540ac3.js";import{U as V}from"./users-5d5ab5df.js";import{S as L}from"./search-d6d85319.js";const Q=y("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),Z=y("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),J=y("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),K=y("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),X=y("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),Y=y("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),ee=({room:t,onFavorite:d,isFavorited:m=!1})=>{var h,f;const[b,g]=c.useState(!1),[p,x]=c.useState(0),N=l=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(l),w=l=>{const i=l.toLowerCase();return i.includes("wifi")||i.includes("internet")?e.jsx(Y,{className:"w-4 h-4"}):i.includes("parking")||i.includes("car")?e.jsx(Q,{className:"w-4 h-4"}):i.includes("food")||i.includes("meal")||i.includes("kitchen")?e.jsx(X,{className:"w-4 h-4"}):e.jsx(V,{className:"w-4 h-4"})},v=()=>{g(!0)},u=(l,i)=>{i.preventDefault(),i.stopPropagation(),x(l==="next"?n=>n===t.photos.length-1?0:n+1:n=>n===0?t.photos.length-1:n-1)},k=l=>{l.preventDefault(),l.stopPropagation(),d&&d(t._id)};return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200 card-hover fade-in",children:e.jsxs(U,{to:`/room/${t._id}`,className:"block",children:[e.jsxs("div",{className:"relative h-48 bg-gray-200",children:[t.photos&&t.photos.length>0&&!b?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.photos[p],alt:t.title,className:"w-full h-full object-cover",onError:v}),t.photos.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:l=>u("prev",l),className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-1 shadow-sm transition-all scale-hover",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:l=>u("next",l),className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-1 shadow-sm transition-all scale-hover",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:t.photos.map((l,i)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${i===p?"bg-white":"bg-white bg-opacity-50"}`},i))})]})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"No image available"})]})}),d&&e.jsx("button",{onClick:k,className:"absolute top-3 right-3 p-2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full shadow-sm transition-all",children:e.jsx(D,{className:`w-4 h-4 ${m?"text-red-500 fill-current":"text-gray-600"}`})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.isAvailable?"Available":"Not Available"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 line-clamp-1",children:t.title}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(F,{className:"w-4 h-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:((h=t.address)==null?void 0:h.area)||((f=t.address)==null?void 0:f.city)||"Location not specified"})]})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),t.amenities&&t.amenities.length>0&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.amenities.slice(0,3).map((l,i)=>e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gray-100 rounded-md text-xs text-gray-700",children:[w(l),e.jsx("span",{className:"capitalize",children:l})]},i)),t.amenities.length>3&&e.jsxs("div",{className:"px-2 py-1 bg-gray-100 rounded-md text-xs text-gray-700",children:["+",t.amenities.length-3," more"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold text-gray-900",children:N(t.rent)}),e.jsx("span",{className:"text-sm text-gray-600",children:"/month"})]}),t.rating&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(G,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.rating.toFixed(1)}),t.reviewCount&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.reviewCount,")"]})]})]}),t.owner&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-primary-600",children:t.owner.name?t.owner.name.charAt(0).toUpperCase():"O"})}),e.jsx("span",{className:"text-sm text-gray-600",children:t.owner.name||"Owner"})]})})]})]})})},ie=()=>{var T;const[t,d]=z();W();const[m,b]=c.useState([]),[g,p]=c.useState(!1),[x,N]=c.useState(0),[w,v]=c.useState(1),[u,k]=c.useState(!1),[h,f]=c.useState("grid"),[l,i]=c.useState(t.get("q")||""),[n,A]=c.useState(t.get("location")||""),[a,R]=c.useState({minRent:t.get("minRent")||"",maxRent:t.get("maxRent")||"",roomType:t.get("roomType")||"",amenities:((T=t.get("amenities"))==null?void 0:T.split(",").filter(Boolean))||[],sortBy:t.get("sortBy")||"createdAt",sortOrder:t.get("sortOrder")||"desc"}),B=["Single","Double","Triple","Shared"],O=["WiFi","AC","Parking","Food","Laundry","Security","Gym","Garden"],I=[{value:"createdAt",label:"Newest First"},{value:"rent",label:"Price: Low to High"},{value:"-rent",label:"Price: High to Low"},{value:"rating",label:"Rating"},{value:"title",label:"Name A-Z"}];c.useEffect(()=>{M()},[t]);const M=async(s=1)=>{try{p(!0);const r=new URLSearchParams;l&&r.set("q",l),n&&r.set("location",n),a.minRent&&r.set("minRent",a.minRent),a.maxRent&&r.set("maxRent",a.maxRent),a.roomType&&r.set("roomType",a.roomType),a.amenities.length>0&&r.set("amenities",a.amenities.join(",")),a.sortBy&&r.set("sortBy",a.sortBy),a.sortOrder&&r.set("sortOrder",a.sortOrder),r.set("page",s.toString()),r.set("limit","12");const o=await _.get(`/rooms?${r.toString()}`);b(s===1?o.data.rooms||[]:C=>[...C,...o.data.rooms||[]]),N(o.data.total||0),v(s)}catch(r){console.error("Error fetching rooms:",r)}finally{p(!1)}},$=s=>{s.preventDefault(),S()},S=()=>{const s=new URLSearchParams;l.trim()&&s.set("q",l.trim()),n.trim()&&s.set("location",n.trim()),a.minRent&&s.set("minRent",a.minRent),a.maxRent&&s.set("maxRent",a.maxRent),a.roomType&&s.set("roomType",a.roomType),a.amenities.length>0&&s.set("amenities",a.amenities.join(",")),a.sortBy&&s.set("sortBy",a.sortBy),a.sortOrder&&s.set("sortOrder",a.sortOrder),d(s),v(1)},j=(s,r)=>{R(o=>({...o,[s]:r}))},H=s=>{R(r=>({...r,amenities:r.amenities.includes(s)?r.amenities.filter(o=>o!==s):[...r.amenities,s]}))},P=()=>{R({minRent:"",maxRent:"",roomType:"",amenities:[],sortBy:"createdAt",sortOrder:"desc"}),i(""),A(""),d(new URLSearchParams)},q=()=>{M(w+1)},E=a.minRent||a.maxRent||a.roomType||a.amenities.length>0||l||n;return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("form",{onSubmit:$,className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search for rooms, mess, PG...",value:l,onChange:s=>i(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Location (City, Area)",value:n,onChange:s=>A(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsxs("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:"Search"})]})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:`lg:w-80 ${u?"block":"hidden lg:block"}`,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),E&&e.jsx("button",{onClick:P,className:"text-sm text-primary-600 hover:text-primary-700",children:"Clear All"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Price Range (â‚¹/month)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("input",{type:"number",placeholder:"Min",value:a.minRent,onChange:s=>j("minRent",s.target.value),className:"input-field"}),e.jsx("input",{type:"number",placeholder:"Max",value:a.maxRent,onChange:s=>j("maxRent",s.target.value),className:"input-field"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Room Type"}),e.jsxs("select",{value:a.roomType,onChange:s=>j("roomType",s.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Types"}),B.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Amenities"}),e.jsx("div",{className:"space-y-2",children:O.map(s=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.amenities.includes(s),onChange:()=>H(s),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:s})]},s))})]}),e.jsx("button",{onClick:S,className:"w-full btn-primary",children:"Apply Filters"})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:l||n?"Search Results":"All Rooms"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[x," ",x===1?"room":"rooms"," found"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[e.jsx("select",{value:`${a.sortBy}${a.sortOrder==="desc"?"":"_asc"}`,onChange:s=>{const r=s.target.value,o=r.endsWith("_asc"),C=o?r.slice(0,-4):r;j("sortBy",C),j("sortOrder",o?"asc":"desc"),S()},className:"input-field text-sm",children:I.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsxs("div",{className:"flex border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>f("grid"),className:`p-2 ${h==="grid"?"bg-primary-600 text-white":"text-gray-600"}`,children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f("list"),className:`p-2 ${h==="list"?"bg-primary-600 text-white":"text-gray-600"}`,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>k(!u),className:"lg:hidden flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]})]})]}),g&&m.length===0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,r)=>e.jsx("div",{className:"bg-gray-200 rounded-lg h-80 animate-pulse"},r))}):m.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid gap-6 ${h==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:m.map(s=>e.jsx(ee,{room:s},s._id))}),m.length<x&&e.jsx("div",{className:"text-center mt-8",children:e.jsx("button",{onClick:q,disabled:g,className:"btn-primary disabled:opacity-50",children:g?"Loading...":"Load More"})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(L,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No rooms found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or filters."}),e.jsx("button",{onClick:P,className:"btn-primary",children:"Clear Filters"})]})]})]})]})})};export{ie as default};
