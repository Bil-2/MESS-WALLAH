import{c as g,r as l,u as A,e as $,j as e,Q as S,z as n}from"./index-2ba54131.js";import{H as I}from"./home-2140c13f.js";import{S as j}from"./shield-363f3f07.js";import{P as w}from"./phone-a0e8aeb2.js";import{L as k,E as R}from"./lock-e78c6a66.js";import{A as u}from"./alert-circle-5a0acaf9.js";import{M as H}from"./mail-95982213.js";const B=g("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),W=g("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]),_=g("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),G=g("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),ee=()=>{const[p,N]=l.useState("otp"),[a,x]=l.useState({email:"",password:"",phone:""}),[f,E]=l.useState(!1),[i,d]=l.useState(!1),[y,c]=l.useState(!1),[m,h]=l.useState(""),[P,C]=l.useState(!1),[s,t]=l.useState({}),b=A(),{sendOtp:T,verifyOtp:L,login:M}=$();l.useEffect(()=>{x({email:"",password:"",phone:""}),t({}),c(!1),h("")},[]);const v=o=>{const{name:r,value:O}=o.target;if(r==="phone"){const V=O.replace(/\D/g,"").slice(0,10);x({...a,[r]:V})}else x({...a,[r]:O});s[r]&&t({...s,[r]:""})},q=async o=>{if(o.preventDefault(),t({}),!a.phone){t({phone:"Phone number is required"});return}if(a.phone.length!==10){t({phone:"Please enter a valid 10-digit phone number"});return}try{d(!0),console.log("ðŸ”„ Sending OTP to:",a.phone);const r=await T(a.phone);console.log("ðŸ“± OTP Send Result:",r),r&&r.success?(console.log("âœ… OTP sent successfully, showing input field"),c(!0),n.success("OTP sent successfully! Enter the 6-digit code.")):(console.error("âŒ OTP send failed:",r),t({phone:(r==null?void 0:r.message)||"Failed to send OTP"}))}catch(r){console.error("ðŸ’¥ Error sending OTP:",r),t({phone:r.message||"Failed to send OTP"})}finally{d(!1)}},z=async o=>{if(o.preventDefault(),t({}),!m||m.length!==6){t({otp:"Please enter a valid 6-digit OTP"});return}try{C(!0);const r=await L(a.phone,m);r.success?(n.success("Login successful!"),b("/profile")):t({otp:r.message||"Invalid OTP"})}catch(r){console.error("Error verifying OTP:",r),t({otp:r.message||"Invalid OTP"})}finally{C(!1)}},D=async o=>{if(o.preventDefault(),t({}),!a.email){t({email:"Email is required"});return}if(!a.password){t({password:"Password is required"});return}try{d(!0);const r=await M(a.email,a.password);r.success?(n.success("Login successful!"),b("/profile")):r.action==="complete_registration"?(t({email:r.message,action:"complete_registration"}),n.error("Please complete your registration first")):r.attemptsRemaining!==void 0?(t({email:r.message,password:`${r.attemptsRemaining} attempts remaining`}),r.hint&&n.error(r.hint)):t({email:r.message||"Invalid credentials"})}catch(r){console.error("Error logging in:",r),r.message.includes("complete your registration")?(n.error("Please complete your registration first"),t({email:"You signed up using phone verification. Please complete your profile by registering with a password.",action:"complete_registration"}),setTimeout(()=>{b("/register")},3e3)):r.message.includes("Invalid credentials")?t({email:"Invalid email or password. Please check your credentials and try again.",password:"Please verify your password is correct"}):t({email:r.message||"Login failed"})}finally{d(!1)}},F=o=>{const r=o.target.value.replace(/\D/g,"").slice(0,6);h(r),s.otp&&t({...s,otp:""})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-pink-50 to-purple-50 dark:from-gray-900 dark:via-purple-900 dark:to-gray-900 flex items-center justify-center py-6 px-4 relative overflow-hidden fade-in",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 text-orange-200 opacity-20 pulse",children:e.jsx(I,{className:"w-24 h-24"})}),e.jsx("div",{className:"absolute top-40 right-20 text-pink-200 opacity-20 pulse",style:{animationDelay:"1s"},children:e.jsx(G,{className:"w-16 h-16"})}),e.jsx("div",{className:"absolute bottom-32 left-20 text-purple-200 opacity-20 pulse",style:{animationDelay:"2s"},children:e.jsx(W,{className:"w-20 h-20"})})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10 slide-in-up",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-pink-500 rounded-2xl flex items-center justify-center text-3xl shadow-2xl scale-hover",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center",children:e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-gray-800",fill:"currentColor",children:[e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 4H5V5h14v2zm0 2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm0 10H5v-8h14v8z"}),e.jsx("rect",{x:"7",y:"11",width:"2",height:"2"}),e.jsx("rect",{x:"11",y:"11",width:"2",height:"2"}),e.jsx("rect",{x:"15",y:"11",width:"2",height:"2"})]})})})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back!"}),e.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-300 mb-4",children:["Sign in to your ",e.jsx("span",{className:"font-bold bg-gradient-to-r from-orange-500 to-pink-500 bg-clip-text text-transparent",children:"MessWallah"})," account"]}),e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 text-green-700 dark:text-green-300 px-4 py-2 rounded-full text-sm font-bold shadow-lg border border-green-200 dark:border-green-800 scale-hover",children:[e.jsx(j,{className:"w-4 h-4"}),"100% Girls Safety Guaranteed"]})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/30 p-6 card-hover",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex rounded-xl bg-gray-100 dark:bg-gray-700/50 p-1",children:[e.jsxs("button",{type:"button",onClick:()=>{N("otp"),c(!1),h(""),t({})},className:`flex-1 py-2 px-4 text-sm font-medium rounded-lg transition-all btn-hover ${p==="otp"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[e.jsx(w,{className:"w-4 h-4 inline mr-2"}),"Login with OTP"]}),e.jsxs("button",{type:"button",onClick:()=>{N("password"),t({})},className:`flex-1 py-2 px-4 text-sm font-medium rounded-lg transition-all btn-hover ${p==="password"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[e.jsx(k,{className:"w-4 h-4 inline mr-2"}),"Login with Password"]})]})}),p==="otp"?e.jsxs("form",{className:"space-y-4",onSubmit:y?z:q,autoComplete:"off",noValidate:!0,children:[y?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter OTP"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"otp",type:"text",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0,value:m,onChange:F,className:`w-full px-4 py-3 pl-10 border ${s.otp?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500"} rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white text-center text-lg tracking-widest font-medium input-focus`,placeholder:"000000",maxLength:"6"})]}),s.otp&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm mt-1",children:[e.jsx(u,{className:"w-4 h-4"}),s.otp]}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["OTP sent to ",e.jsxs("span",{className:"font-medium text-orange-600",children:["+91 ",a.phone]})]}),e.jsx("button",{type:"button",onClick:()=>{c(!1),h(""),t({})},className:"mt-1 text-purple-600 dark:text-purple-400 hover:underline font-medium text-sm hover-lift",children:"Change number"})]})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0,value:a.phone,onChange:v,maxLength:"10",className:`w-full px-4 py-3 pl-10 border ${s.phone?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500"} rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white input-focus`,placeholder:"Enter your phone number"})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm mt-1",children:[e.jsx(u,{className:"w-4 h-4"}),s.phone]})]}),e.jsx("button",{type:"submit",disabled:i||P,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent text-base font-medium rounded-lg text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed btn-hover",children:i||P?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):y?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"Verify OTP"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-5 h-5 mr-2"}),"Send OTP"]})})]}):e.jsxs("form",{className:"space-y-4",onSubmit:D,autoComplete:"off",noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0,value:a.email,onChange:v,className:`w-full px-4 py-3 pl-10 border ${s.email?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500"} rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white input-focus`,placeholder:"Enter your email"})]}),s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm mt-1",children:[e.jsx(u,{className:"w-4 h-4"}),s.email]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",name:"password",type:f?"text":"password",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0,value:a.password,onChange:v,className:`w-full px-4 py-3 pl-10 pr-10 border ${s.password?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-orange-500 focus:ring-orange-500"} rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white input-focus`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>E(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 scale-hover",children:f?e.jsx(_,{className:"h-5 w-5"}):e.jsx(R,{className:"h-5 w-5"})})]}),s.password&&e.jsxs("div",{className:"flex items-center gap-2 text-red-500 text-sm mt-1",children:[e.jsx(u,{className:"w-4 h-4"}),s.password]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(S,{to:"/forgot-password",className:"font-medium text-orange-600 hover:text-orange-500 dark:text-orange-400 dark:hover:text-orange-300 hover-lift",children:"Forgot password?"})})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent text-base font-medium rounded-lg text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed btn-hover",children:i?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Sign In"]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white/90 dark:bg-gray-800/90 text-gray-500 dark:text-gray-400 font-medium",children:"Don't have an account?"})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(S,{to:"/register",className:"inline-flex items-center font-medium text-base text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 hover-lift",children:["Create MessWallah Account",e.jsx(B,{className:"w-4 h-4 ml-2"})]})})]})]})]})]})};export{ee as default};
